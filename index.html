<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUSIC DNA - ULTIMATE CHOICE</title>
    <style>
        :root {
            --bg: #050505;
            --card-inner: #121212;
            --accent-l: #6366f1; /* Left Color */
            --accent-r: #ec4899; /* Right Color */
            --text: #ffffff;
            --text-dim: #a1a1aa;
        }

        body {
            font-family: "Inter", "Hiragino Kaku Gothic ProN", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
        }

        header h1 {
            font-size: 1.5rem;
            letter-spacing: 4px;
            font-weight: 900;
            margin: 0;
            background: linear-gradient(90deg, var(--accent-l), var(--accent-r));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        header p {
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-top: 10px;
        }

        /* 質問リスト */
        .question-wrapper {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 60px;
        }

        .q-container {
            background: var(--card-inner);
            border-radius: 24px;
            padding: 24px;
            border: 1px solid #27272a;
        }

        .q-header {
            font-size: 0.7rem;
            font-weight: bold;
            color: var(--text-dim);
            margin-bottom: 15px;
            display: block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* 2択ボタンのデザイン */
        .choice-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .choice-btn {
            position: relative;
            background: #18181b;
            border: 2px solid #27272a;
            color: white;
            padding: 20px 15px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            line-height: 1.5;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 100px;
        }

        /* 左側選択時 */
        .choice-btn.left.active {
            border-color: var(--accent-l);
            background: rgba(99, 102, 241, 0.1);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
        }

        /* 右側選択時 */
        .choice-btn.right.active {
            border-color: var(--accent-r);
            background: rgba(236, 72, 153, 0.1);
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.2);
        }

        /* 分析ボタン */
        .footer-action {
            text-align: center;
            padding-bottom: 100px;
        }

        .analyze-btn {
            background: white;
            color: black;
            border: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            transition: 0.3s;
        }

        .analyze-btn:disabled {
            background: #27272a;
            color: #52525b;
            cursor: not-allowed;
        }

        /* 結果オーバーレイ */
        #result-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        /* 結果カード本体 */
        .result-card {
            background: #fff;
            color: #000;
            width: 100%;
            max-width: 400px;
            border-radius: 32px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            animation: cardIn 0.5s ease-out;
        }

        @keyframes cardIn {
            from { opacity: 0; transform: scale(0.9) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .card-top {
            background: #000;
            padding: 40px 20px;
            text-align: center;
            color: white;
        }

        .card-content {
            padding: 40px 30px;
            text-align: center;
        }

        .res-title {
            font-size: 1.8rem;
            font-weight: 900;
            margin: 10px 0;
            line-height: 1.2;
            letter-spacing: -1px;
        }

        .res-desc {
            font-size: 0.9rem;
            color: #4b5563;
            line-height: 1.7;
            margin-top: 20px;
        }

        .share-box {
            margin-top: 35px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .share-btn {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }

        .x-btn { background: #000; }
        .line-btn { background: #06C755; }

        .close-link {
            display: block;
            margin-top: 25px;
            font-size: 0.8rem;
            color: #9ca3af;
            cursor: pointer;
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>MUSIC DNA</h1>
        <p>15の究極の二択。あなたの本能が選ぶのは？</p>
    </header>

    <div class="question-wrapper" id="q-list">
        </div>

    <div class="footer-action">
        <button id="analyze-btn" class="analyze-btn" disabled onclick="showResult()">DNAを分析する</button>
    </div>
</div>

<div id="result-overlay">
    <div class="result-card">
        <div class="card-top">
            <div style="font-size: 0.7rem; letter-spacing: 3px; color: #71717a;">ANALYSIS COMPLETED</div>
            <div style="font-size: 1.2rem; font-weight: 900; margin-top: 10px;">CERTIFIED LISTENER</div>
        </div>
        <div class="card-content">
            <div id="res-title" class="res-title">称号</div>
            <p id="res-desc" class="res-desc">説明文</p>
            
            <div class="share-box">
                <a href="#" id="share-x" target="_blank" class="share-btn x-btn">X SHARE</a>
                <a href="#" id="share-line" target="_blank" class="share-btn line-btn">LINE</a>
            </div>
            <span class="close-link" onclick="location.reload()">RETRY</span>
        </div>
    </div>
</div>

<script>
    const questions = [
        { a: "爆音のロックで<br>解放されたい", b: "一緒に沈んでくれる曲に<br>救われたい", catA: "energy", catB: "deep" },
        { a: "ライブで盛り上がる<br>ダンスナンバー", b: "お洒落で洗練された<br>チルな時間", catA: "energy", catB: "aesthetic" },
        { a: "歌詞を噛み締め<br>深く考察したい", b: "空間を彩る響きに<br>酔いしれたい", catA: "deep", catB: "aesthetic" },
        { a: "複雑な構成に<br>脳がゾクゾクする", b: "直感的なパワーに<br>体が勝手に動く", catA: "skill", catB: "energy" },
        { a: "楽器単体の凄さを<br>聴き込みたい", b: "ボーカルや全体の<br>雰囲気を大事にしたい", catA: "skill", catB: "aesthetic" },
        { a: "完璧なイントロから<br>始まりたい", b: "物語の余韻に<br>浸りたい", catA: "skill", catB: "deep" },
        { a: "正体不明な才能を<br>見つけ出したい", b: "圧倒的な熱量を放つ<br>カリスマに惹かれる", catA: "dig", catB: "energy" },
        { a: "無名のインディーズを<br>掘り当てたい", b: "洗練された<br>最新トレンドを浴びたい", catA: "dig", catB: "aesthetic" },
        { a: "常に新しい刺激を<br>ディグり続けたい", b: "職人芸のような演奏を<br>堪能したい", catA: "dig", catB: "skill" },
        { a: "雨の日や深夜に<br>一人で浸る音楽", b: "晴天のドライブに<br>背中を押す音楽", catA: "deep", catB: "energy" },
        { a: "インスト曲の<br>かっこよさに惹かれる", b: "孤独や葛藤が伝わる<br>生々しい歌に惹かれる", catA: "skill", catB: "deep" },
        { a: "トータルな美学がある<br>人が好き", b: "音楽そのものの<br>異質さが好き", catA: "aesthetic", catB: "dig" },
        { a: "爆発的な元気を<br>チャージしたい", b: "優雅で心地よい<br>安らぎがほしい", catA: "energy", catB: "aesthetic" },
        { a: "心を揺さぶるのは<br>「魂の叫び」だ", b: "心を揺さぶるのは<br>「音の構築美」だ", catA: "deep", catB: "skill" },
        { a: "「自分だけが知っている」<br>特別感が大事", b: "「みんなで熱くなれる」<br>一体感が大事", catA: "dig", catB: "energy" }
    ];

    const answers = new Array(questions.length).fill(null);
    const qList = document.getElementById('q-list');

    questions.forEach((q, idx) => {
        const div = document.createElement('div');
        div.className = 'q-container';
        div.innerHTML = `
            <span class="q-header">Phase ${idx + 1}</span>
            <div class="choice-group">
                <button class="choice-btn left" onclick="select(${idx}, 'A', this)">${q.a}</button>
                <button class="choice-btn right" onclick="select(${idx}, 'B', this)">${q.b}</button>
            </div>
        `;
        qList.appendChild(div);
    });

    function select(idx, type, btn) {
        answers[idx] = type;
        const parent = btn.parentElement;
        Array.from(parent.children).forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const answeredCount = answers.filter(a => a !== null).length;
        if (answeredCount === questions.length) {
            document.getElementById('analyze-btn').disabled = false;
        }
    }

    function showResult() {
        let scores = { energy: 0, deep: 0, aesthetic: 0, skill: 0, dig: 0 };
        answers.forEach((ans, idx) => {
            const cat = ans === 'A' ? questions[idx].catA : questions[idx].catB;
            scores[cat]++;
        });

        const main = [{id:'energy', v:scores.energy}, {id:'deep', v:scores.deep}, {id:'aesthetic', v:scores.aesthetic}].sort((a,b)=>b.v-a.v);
        const sub = [{id:'skill', v:scores.skill}, {id:'dig', v:scores.dig}].sort((a,b)=>b.v-a.v);
        
        const top1 = main[0].id;
        const top2 = (main[1].v >= sub[0].v) ? main[1].id : sub[0].id;

        const titleMap = {
            "energy_skill": ["超絶技巧の熱狂的マエストロ", "激しさの中にある緻密な技術や構成の凄さを見抜く耳の持ち主。"],
            "energy_dig": ["最前線を焼く爆音ハンター", "刺激と熱狂を求めて、インディーズからネット発まで掘り続ける開拓者。"],
            "energy_deep": ["魂を震わせる情熱の代弁者", "明るい曲の中にも深いメッセージ性を求め、全力で音楽に感情移入する。"],
            "energy_aesthetic": ["光り輝くステージの目撃者", "派手なパフォーマンスや洗練されたビジュアル、空間そのものを愛する。"],
            "deep_skill": ["深淵を設計する音響哲学者", "物語性を大事にしつつ、その裏にある複雑な音の重なりを分析して楽しむ人。"],
            "deep_dig": ["ネットの海底を漂う感情の観測者", "自分だけの孤独に寄り添う、まだ見ぬ誰かの歌をネットの底で探し続ける。"],
            "deep_energy": ["静寂を切り裂く心の革命家", "内側に強い熱量を秘めており、エモーショナルな爆音に救いを見出す。"],
            "deep_aesthetic": ["月夜に沈む美学の詩人", "深夜や雨の日に、美しい言葉選びと綺麗な旋律だけに浸り、自分だけの世界を作る。"],
            "aesthetic_skill": ["完璧な余白を創る音響アーキテクト", "お洒落な雰囲気だけでなく、空間を構成する一つ一つの音色にこだわる人。"],
            "aesthetic_dig": ["トレンドの境界を歩く審美家", "常に最先端のセンスを持ち、ジャンルレスに「今かっこいい音」をキャッチする。"],
            "aesthetic_energy": ["鮮やかに踊るアーバン・ダンサー", "洗練された都会的なビートを好み、音楽で日常を鮮やかに彩るスタイル派。"],
            "aesthetic_deep": ["黄昏に寄り添うエモ・ドリーマー", "切ない歌詞に弱く、音楽を聴くことで物語の中に没入したいロマンチスト。"]
        };

        const result = titleMap[`${top1}_${top2}`] || ["ジャンル無用の音楽放浪者", "特定のジャンルに定住せず、常に新しい音を求めてさまよい続ける音楽の冒険家。"];

        document.getElementById('res-title').innerText = result[0];
        document.getElementById('res-desc').innerText = result[1];
        document.getElementById('result-overlay').style.display = 'flex';

        const shareText = `【MUSIC DNA 分析結果】\n私の属性は《${result[0]}》でした！\n#音楽属性診断 #MUSIC_DNA\n`;
        document.getElementById('share-x').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(window.location.href)}`;
        document.getElementById('share-line').href = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(window.location.href)}`;
    }
</script>
</body>
</html>
