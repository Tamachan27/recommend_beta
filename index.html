<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUSIC DNA ANALYSIS | 音楽属性診断</title>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --accent: #10b981;
            --bg: #0f172a; /* 深夜の空のような深い紺色 */
            --card-bg: #ffffff;
            --text-main: #f8fafc;
            --text-dark: #1e293b;
        }

        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px 0;
            line-height: 1.6;
        }

        .container {
            width: 90%;
            max-width: 600px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 0;
        }

        h1 {
            font-size: 2rem;
            letter-spacing: 2px;
            background: linear-gradient(to right, #818cf8, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .intro-text {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* 質問リストのスタイル */
        .question-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .q-card {
            background: #1e293b;
            padding: 25px;
            border-radius: 20px;
            border: 1px solid #334155;
        }

        .q-text {
            font-size: 1.05rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: block;
        }

        /* 3点法回答ボタン */
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
        }

        .opt-btn {
            background: #334155;
            border: none;
            color: #cbd5e1;
            padding: 12px 5px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: bold;
            transition: all 0.2s;
        }

        .opt-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
        }

        .submit-area {
            text-align: center;
            padding: 40px 0;
        }

        .submit-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        /* 結果カードのスタイル */
        #result-area {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            z-index: 100;
            overflow-y: auto;
            padding: 40px 0;
        }

        .result-card {
            background: white;
            color: var(--text-dark);
            width: 85%;
            max-width: 450px;
            margin: 0 auto;
            border-radius: 30px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .card-header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .card-header .label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #94a3b8;
        }

        .card-body {
            padding: 40px 30px;
            text-align: center;
        }

        .res-type-title {
            font-size: 1.8rem;
            font-weight: 900;
            margin: 10px 0;
            color: var(--primary);
            line-height: 1.2;
        }

        .res-desc {
            font-size: 0.95rem;
            color: #64748b;
            margin-top: 20px;
            line-height: 1.7;
        }

        /* シェアボタン */
        .share-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .share-btn {
            padding: 12px 20px;
            border-radius: 12px;
            text-decoration: none;
            color: white;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .x-share { background: #000; }
        .line-share { background: #06C755; }

        .close-btn {
            display: block;
            margin: 30px auto;
            background: transparent;
            color: #94a3b8;
            border: 1px solid #475569;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
        }

    </style>
</head>
<body>

<div class="container" id="main-content">
    <header>
        <h1>MUSIC DNA ANALYSIS</h1>
        <p class="intro-text">15の質問から、あなたの音楽的魂の正体を解析します。</p>
    </header>

    <div class="question-list" id="question-list">
        </div>

    <div class="submit-area">
        <button class="submit-btn" onclick="calculateResult()">分析結果を見る</button>
    </div>
</div>

<div id="result-area">
    <div class="result-card">
        <div class="card-header">
            <div class="label">Music Analysis Report</div>
            <div style="font-size: 1.2rem; font-weight: bold; margin-top: 5px;">CERTIFIED LISTENER</div>
        </div>
        <div class="card-body">
            <div id="res-name" class="res-type-title">称号を読み込み中...</div>
            <p id="res-desc" class="res-desc"></p>

            <div class="share-group">
                <a href="#" id="x-share-link" target="_blank" class="share-btn x-share">Xでシェア</a>
                <a href="#" id="line-share-link" target="_blank" class="share-btn line-share">LINEで送る</a>
            </div>
        </div>
    </div>
    <button class="close-btn" onclick="document.getElementById('result-area').style.display='none'">やり直す</button>
</div>

<script>
    const questions = [
        { q: "ストレスを吹き飛ばすような、爆音のロックに解放感を感じる。", cat: "energy" },
        { q: "音楽には、ポジティブで明るい「元気」をチャージしてほしい。", cat: "energy" },
        { q: "ライブで盛り上がる曲や、リズム重視のダンスミュージックが好き。", cat: "energy" },
        { q: "歌詞を「言葉」として一文字ずつ噛み締め、その意味を深く考察したい。", cat: "deep" },
        { q: "つらい時は、無理な励ましよりも「一緒に底まで沈んでくれる曲」がいい。", cat: "deep" },
        { q: "雨の日や深夜、静かな時間に一人で浸れる音楽が日常に欠かせない。", cat: "deep" },
        { q: "「チル」や「エモい」という言葉が似合う、洗練されたお洒落な空気が好き。", cat: "aesthetic" },
        { q: "激しい音より、空間を彩る「静かで優雅な響き」に心地よさを感じる。", cat: "aesthetic" },
        { q: "変拍子や意外な転調など、頭を使う「複雑な構成」の曲にゾクゾクする。", cat: "skill" },
        { q: "曲の良し悪しは、開始数秒の「イントロ」で決まると思っている。", cat: "skill" },
        { q: "それぞれの楽器（ベースやドラムなど）が際立つような曲が好きだ。", cat: "skill" },
        { q: "歌声よりも、楽器だけで構成されたインスト曲にかっこよさを感じる。", cat: "skill" },
        { q: "ネット発の才能や、正体不明でミステリアスなアーティストにワクワクする。", cat: "dig" },
        { q: "まだ誰にも見つかっていないインディーズバンドを見つけるのが喜びだ。", cat: "dig" },
        { q: "ジャンルにこだわらず、常に新しい刺激を求めてディグり続けている。", cat: "dig" }
    ];

    // 質問リストを生成
    const qListContainer = document.getElementById('question-list');
    questions.forEach((item, index) => {
        const qCard = document.createElement('div');
        qCard.className = 'q-card';
        qCard.innerHTML = `
            <span class="q-text">${index + 1}. ${item.q}</span>
            <div class="options">
                <button class="opt-btn" onclick="setScore(${index}, 2, this)">はい</button>
                <button class="opt-btn" onclick="setScore(${index}, 1, this)">どちらでも</button>
                <button class="opt-btn" onclick="setScore(${index}, 0, this)">いいえ</button>
            </div>
        `;
        qListContainer.appendChild(qCard);
    });

    let userScores = new Array(questions.length).fill(null);

    function setScore(qIdx, score, btn) {
        userScores[qIdx] = score;
        const parent = btn.parentElement;
        Array.from(parent.children).forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    function calculateResult() {
        if (userScores.includes(null)) {
            alert("まだ未回答の質問があります！");
            return;
        }

        let totals = { energy: 0, deep: 0, aesthetic: 0, skill: 0, dig: 0 };
        questions.forEach((q, idx) => {
            totals[q.cat] += userScores[idx];
        });

        // 称号判定ロジック
        const mainAxes = [
            { id: 'energy', val: totals.energy },
            { id: 'deep', val: totals.deep },
            { id: 'aesthetic', val: totals.aesthetic }
        ].sort((a,b) => b.val - a.val);

        const subAxes = [
            { id: 'skill', val: totals.skill },
            { id: 'dig', val: totals.dig }
        ].sort((a,b) => b.val - a.val);

        const top1 = mainAxes[0].id;
        const remaining = [mainAxes[1], subAxes[0]].sort((a,b) => b.val - a.val);
        const top2 = remaining[0].id;

        const titleMap = {
            "energy_skill": ["超絶技巧の熱狂的マエストロ", "激しさの中にある緻密な技術や構成の凄さを見抜く耳の持ち主。"],
            "energy_dig": ["最前線を焼く爆音ハンター", "刺激と熱狂を求めて、インディーズからネット発まで掘り続ける開拓者。"],
            "energy_deep": ["魂を震わせる情熱の代弁者", "明るい曲の中にも深いメッセージ性を求め、全力で音楽に感情移入するタイプ。"],
            "energy_aesthetic": ["光り輝くステージの目撃者", "派手なパフォーマンスや洗練されたビジュアル、空間そのものを愛するタイプ。"],
            "deep_skill": ["深淵を設計する音響哲学者", "物語性を大事にしつつ、その裏にある複雑な音の重なりを分析して楽しむ人。"],
            "deep_dig": ["ネットの海底を漂う感情の観測者", "自分だけの孤独に寄り添う、まだ見ぬ誰かの歌をネットの底で探し続ける。"],
            "deep_energy": ["静寂を切り裂く心の革命家", "内側に強い熱量を秘めており、エモーショナルな爆音に救いを見出すタイプ。"],
            "deep_aesthetic": ["月夜に沈む美学の詩人", "深夜や雨の日に、美しい言葉選びと綺麗な旋律だけに浸り、自分だけの世界を作る。"],
            "aesthetic_skill": ["完璧な余白を創る音響アーキテクト", "お洒落な雰囲気だけでなく、空間を構成する一つ一つの音色にこだわる人。"],
            "aesthetic_dig": ["トレンドの境界を歩く審美家", "常に最先端のセンスを持ち、ジャンルレスに「今かっこいい音」をキャッチする。"],
            "aesthetic_energy": ["鮮やかに踊るアーバン・ダンサー", "洗練された都会的なビートを好み、音楽で日常を鮮やかに彩るスタイル派。"],
            "aesthetic_deep": ["黄昏に寄り添うエモ・ドリーマー", "切ない歌詞に弱く、音楽を聴くことで物語の中に没入したいロマンチスト。"]
        };

        const result = titleMap[`${top1}_${top2}`] || ["ジャンル無用の音楽放浪者", "特定のジャンルに定住せず、常に新しい音を求めてさまよい続ける音楽の冒険家。"];
        
        // 結果表示
        document.getElementById('res-name').innerText = result[0];
        document.getElementById('res-desc').innerText = result[1];
        document.getElementById('result-area').style.display = 'block';

        // SNSシェアリンク作成
        const shareText = `私の音楽属性は【${result[0]}】でした！\n#音楽属性診断 #MUSIC_DNA_ANALYSIS\n`;
        const shareUrl = window.location.href;
        document.getElementById('x-share-link').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
        document.getElementById('line-share-link').href = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(shareUrl)}`;
    }
</script>

</body>
</html>
</script>

</body>
</html>
